<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="meta_pdiff_two is suitable for synthesizing across multiple two-group
studies with a categorical outcome variable.  It takes as input the
the number of cases/events in the comparison and reference groups as
well as the total number of samples in the comparison and reference groups."><title>Estimate meta-analytic difference in proportions over multiple studies
with two independent groups and a categorical outcome variable. — meta_pdiff_two • esci</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate meta-analytic difference in proportions over multiple studies
with two independent groups and a categorical outcome variable. — meta_pdiff_two"><meta property="og:description" content="meta_pdiff_two is suitable for synthesizing across multiple two-group
studies with a categorical outcome variable.  It takes as input the
the number of cases/events in the comparison and reference groups as
well as the total number of samples in the comparison and reference groups."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">esci</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rcalinjageman/esci/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Estimate meta-analytic difference in proportions over multiple studies
with two independent groups and a categorical outcome variable.</h1>
      <small class="dont-index">Source: <a href="https://github.com/rcalinjageman/esci/blob/HEAD/R/meta_pdiff_two.R" class="external-link"><code>R/meta_pdiff_two.R</code></a></small>
      <div class="d-none name"><code>meta_pdiff_two.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>meta_pdiff_two</code> is suitable for synthesizing across multiple two-group
studies with a categorical outcome variable.  It takes as input the
the number of cases/events in the comparison and reference groups as
well as the total number of samples in the comparison and reference groups.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">meta_pdiff_two</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">comparison_cases</span>,</span>
<span>  <span class="va">comparison_ns</span>,</span>
<span>  <span class="va">reference_cases</span>,</span>
<span>  <span class="va">reference_ns</span>,</span>
<span>  labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  moderator <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contrast <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effect_label <span class="op">=</span> <span class="st">"My effect"</span>,</span>
<span>  reported_effect_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RD"</span>, <span class="st">"RR"</span>, <span class="st">"OR"</span>, <span class="st">"AS"</span>, <span class="st">"PETO"</span><span class="op">)</span>,</span>
<span>  random_effects <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A dataframe or tibble</p></dd>


<dt>comparison_cases</dt>
<dd><p>A collection of case/event counts for the comparison
groups, 1 per study, all integers &gt;= 0</p></dd>


<dt>comparison_ns</dt>
<dd><p>A collection of sample sizes for the comparison groups,
1 per study, all integers &gt; 2</p></dd>


<dt>reference_cases</dt>
<dd><p>A collection of case/event counts for the reference
groups, 1 per study, all integers &gt;= 0</p></dd>


<dt>reference_ns</dt>
<dd><p>A collection of sample sizes for the reference groups,
1 per study, all integers &gt; 2</p></dd>


<dt>labels</dt>
<dd><p>An optional collection of study labels</p></dd>


<dt>moderator</dt>
<dd><p>An optional factor to analyze as a categorical moderator,
must have k &gt; 2 per groups</p></dd>


<dt>contrast</dt>
<dd><p>An optional contrast to estimate between moderator levels;
express as a vector of contrast weights with 1 weight per moderator level.</p></dd>


<dt>effect_label</dt>
<dd><p>Optional character giving a human-friendly name of
the effect being synthesized</p></dd>


<dt>reported_effect_size</dt>
<dd><p>Character specifying effect size to return:
Must be one of 'RD' (risk difference, default), 'RR' (log risk
ratio), 'OR' (log odds ratio), 'AS' (arcsine square root transformed
risk difference), or 'PETO' (log odds ratio estimated using Peto's
method).  See <code><a href="https://wviechtb.github.io/metafor/reference/escalc.html" class="external-link">metafor::escalc()</a></code> for details.</p></dd>


<dt>random_effects</dt>
<dd><p>TRUE for random effect model; FALSE for fixed effects</p></dd>


<dt>conf_level</dt>
<dd><p>The confidence level for the confidence interval.  Given in
decimal form.  Defaults to 0.95.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An esci-estimate object; a list of data frames and properties.
Returned tables include:</p><ul><li><p><strong>es_meta</strong> - A data frame of meta-analytic effect sizes.  If a moderator was
defined, there is an additional row for each level of the moderator.</p><ul><li><p><em>effect_label</em> -  Study label</p></li>
<li><p><em>effect_size</em> - Effect size</p></li>
<li><p><em>LL</em> - Lower bound of conf_level% confidence interval</p></li>
<li><p><em>UL</em> - Upper bound of conf_level% confidence interval</p></li>
<li><p><em>SE</em> - Expected standard error</p></li>
<li><p><em>k</em> - Number of studies</p></li>
<li><p><em>diamond_ratio</em> - ratio of random to fixed effects meta-analytic effect sizes</p></li>
<li><p><em>diamond_ratio_LL</em> - lower bound of conf_level% confidence interval for diamond ratio</p></li>
<li><p><em>diamond_ratio_UL</em> - upper bound of conf_level% confidence interval for diamond ratio</p></li>
<li><p><em>I2</em> -  I2 measure of heterogeneity</p></li>
<li><p><em>I2_LL</em> - Lower bound of conf_level% confidence interval for I2</p></li>
<li><p><em>I2_UL</em> - upper bound of conf_level% confidence interval for I2</p></li>
<li><p><em>PI_LL</em> - lower bound of conf_level% of prediction interval</p></li>
<li><p><em>PI_UL</em> - upper bound of conf_level% of prediction interval</p></li>
<li><p><em>p</em> - p value for the meta-analytic effect size, based on null of exactly 0</p></li>
<li><p>*width - width of the effect-size confidence interval</p></li>
<li><p><em>FE_effect_size</em> - effect size of the fixed-effects model (regardless of if fixed effects was selected</p></li>
<li><p><em>RE_effect_size</em> - effect size of the random-effects model (regardless of if random effects was selected</p></li>
<li><p><em>FE_CI_width</em> - width of the fixed-effects confidence interval, used to calculate diamond ratio</p></li>
<li><p><em>RE_CI_width</em> - width of the fixed-effects confidence interval, used to calculate diamond ratio</p></li>
</ul></li>
<li><p><strong>es_heterogeneity</strong> - A data frame of of heterogeneity values and
conf_level% CIs for the meta-analytic effect size.  If a moderator was defined
also reports heterogeneity estimates for each level of the moderator.</p><ul><li><p><em>effect_label</em> - study label</p></li>
<li><p><em>moderator_variable_name</em> - if moderator passed, gives name of the moderator</p></li>
<li><p><em>moderator_level</em> - 'Overall' and each level of moderator, if passed</p></li>
<li><p><em>measure</em> - Name of the measure of heterogeneity</p></li>
<li><p><em>estimate</em> - Value of the heterogeneity estimate</p></li>
<li><p><em>LL</em> - lower bound of conf_level% confidence interval</p></li>
<li><p><em>UL</em> - upper bound of conf_level% confidence interval</p></li>
</ul></li>
<li><p><strong>raw_data</strong> - A data from with one row for each study that was passed</p><ul><li><p><em>label</em> - study label</p></li>
<li><p><em>effect_size</em> - effect size</p></li>
<li><p><em>weight</em> - study weight in the meta analysis</p></li>
<li><p><em>sample_variance</em> - expected level of sampling variation</p></li>
<li><p><em>SE</em> - expected standard error</p></li>
<li><p><em>LL</em> - lower bound of conf_level% confidence interval</p></li>
<li><p><em>UL</em> - upper bound of conf_level% confidence interval</p></li>
<li><p><em>mean</em> - used to calculate study p value; this is the d value entered for the study</p></li>
<li><p><em>sd</em> - use to calculate study p value; set to 1 for each study</p></li>
<li><p><em>n</em> - study sample size</p></li>
<li><p><em>p</em> - p value for the study, based on null of exactly 0</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Once you generate an estimate with this function, you can visualize
it with <code><a href="plot_meta.html">plot_meta()</a></code>.</p>
<p>The meta-analytic effect size, confidence interval and heterogeneity
estimates all come from <code><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">metafor::rma()</a></code>.</p>
<p>The conversion of events into suitable effect sizes is handled by
<code><a href="https://wviechtb.github.io/metafor/reference/escalc.html" class="external-link">metafor::escalc()</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Data set: Replications of power on egocentric behavior</span></span></span>
<span class="r-in"><span><span class="va">esci_meta_pdiff_two</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  studies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Online"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Original"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Online Pilot"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Exact replication"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  control_egocentric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">33</span>,</span></span>
<span class="r-in"><span>    <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    <span class="fl">7</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  control_sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fl">101</span>,</span></span>
<span class="r-in"><span>    <span class="fl">33</span>,</span></span>
<span class="r-in"><span>    <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    <span class="fl">53</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  power_egocentric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">48</span>,</span></span>
<span class="r-in"><span>    <span class="fl">8</span>,</span></span>
<span class="r-in"><span>    <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    <span class="fl">11</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  power_sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">105</span>,</span></span>
<span class="r-in"><span>    <span class="fl">24</span>,</span></span>
<span class="r-in"><span>    <span class="fl">12</span>,</span></span>
<span class="r-in"><span>    <span class="fl">56</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  setting <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"Online"</span>,</span></span>
<span class="r-in"><span>     <span class="st">"In-Person"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Online"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"In-Person"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Meta-analysis, risk difference as effect size</span></span></span>
<span class="r-in"><span><span class="va">estimate</span> <span class="op">&lt;-</span> <span class="fu">esci</span><span class="fu">::</span><span class="fu">meta_pdiff_two</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">esci_meta_pdiff_two</span>,</span></span>
<span class="r-in"><span>  <span class="va">power_egocentric</span>,</span></span>
<span class="r-in"><span>  <span class="va">power_sample_size</span>,</span></span>
<span class="r-in"><span>  <span class="va">control_egocentric</span>,</span></span>
<span class="r-in"><span>  <span class="va">control_sample_size</span>,</span></span>
<span class="r-in"><span>  <span class="va">studies</span>,</span></span>
<span class="r-in"><span>  reported_effect_size <span class="op">=</span> <span class="st">"RD"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Forest plot</span></span></span>
<span class="r-in"><span><span class="va">myplot_forst</span> <span class="op">&lt;-</span> <span class="fu">esci</span><span class="fu">::</span><span class="fu"><a href="plot_meta.html">plot_meta</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add a categorical moderator (setting)</span></span></span>
<span class="r-in"><span><span class="va">estimate_moderator</span> <span class="op">&lt;-</span> <span class="fu">esci</span><span class="fu">::</span><span class="fu">meta_pdiff_two</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">esci_meta_pdiff_two</span>,</span></span>
<span class="r-in"><span>  <span class="va">power_egocentric</span>,</span></span>
<span class="r-in"><span>  <span class="va">power_sample_size</span>,</span></span>
<span class="r-in"><span>  <span class="va">control_egocentric</span>,</span></span>
<span class="r-in"><span>  <span class="va">control_sample_size</span>,</span></span>
<span class="r-in"><span>  <span class="va">studies</span>,</span></span>
<span class="r-in"><span>  moderator <span class="op">=</span> <span class="va">setting</span>,</span></span>
<span class="r-in"><span>  reported_effect_size <span class="op">=</span> <span class="st">"RD"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Forest plot</span></span></span>
<span class="r-in"><span><span class="va">myplot_forest_moderator</span> <span class="op">&lt;-</span> <span class="fu">esci</span><span class="fu">::</span><span class="fu"><a href="plot_meta.html">plot_meta</a></span><span class="op">(</span><span class="va">estimate_moderator</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Scale for <span style="color: #00BB00;">x</span> is already present.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding another scale for <span style="color: #00BB00;">x</span>, which will replace the existing scale.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Scale for <span style="color: #00BB00;">y</span> is already present.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding another scale for <span style="color: #00BB00;">y</span>, which will replace the existing scale.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Robert Calin-Jageman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

